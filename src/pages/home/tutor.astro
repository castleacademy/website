---
import StarRating from "~/components/ui/star-rating.tsx";
import { Button } from "~/components/ui/button.tsx";
import { ArrowRightIcon } from "lucide-react";
import TutorCard from "~/components/tutor/tutor-card.astro";
import TutorCardContent from "~/components/tutor/tutor-card-content.astro";
import { contentfulClient } from "~/lib/contentful";
import type { TutorSkeleton } from "~/lib/types";

const tutors = await contentfulClient.getEntries<TutorSkeleton>({
  content_type: "tutor",
});

// console.log("tutors", tutors.items[0].fields.picture.fields?.file?.url);
---

<section class="container">
    <div class="flex flex-col items-center text-center mb-12 mt-26">
      <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold">
        Temukan Partner Belajar Terbaikmu
      </h2>
      <p class="text-sm sm:text-base lg:text-xl">
        Semua yang perlu kamu tahu sebelum memulai perjalanan belajarmu
      </p>
      <a class="mt-3" href="/tutor">
        <Button variant="embossed">
          <span class="-translate-y-0.25"> Lihat Semua Tutor </span>
          <ArrowRightIcon />
        </Button>
      </a>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-8 mb-26">
      {(tutors.items as any[]).slice(0, 4).map((tutor) => (
        <TutorCard backgroundImage={tutor.fields?.picture?.fields?.file?.url} class="aspect-[264/327]">
          <TutorCardContent>
            <div class="flex items-center justify-between mb-0.5 sm:mb-1.5">
              <h3 class="text-[11px] sm:text-sm md:text-base lg:text-xl font-bold text-gray-900 line-clamp-1 sm:line-clamp-2">{tutor.fields?.name}</h3>
              <div class="flex-shrink-0 -translate-y-0.5">
                <StarRating 
                  value={tutor.fields.rating || 4.5} 
                  readOnly 
                  responsiveSize="w-3 h-3 sm:w-4 sm:h-4 lg:w-5 lg:h-5"
                  className="align-middle"
                />
              </div>
            </div>
            
            <div class="border-t-1 sm:border-t-2 border-gray-200 pt-0.5 sm:pt-1.5">
              <p class="text-[10px] sm:text-xs text-gray-600">Spesialisasi:</p>
              <p class="text-[11px] sm:text-sm md:text-base lg:text-lg font-semibold text-gray-900 line-clamp-1">{tutor.fields.specialization}</p>
            </div>
          </TutorCardContent>
        </TutorCard>
      ))}
    </div>
</section>

